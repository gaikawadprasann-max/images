<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú¶ Prasann's Space</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400;1,500&family=Space+Grotesk:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
:root {
  --accent:   #f0a8c0;
  --accent2:  #88d4f5;
  --accent3:  #a8e6c8;
  --accent4:  #d4a8f0;
  --bg-opacity: 1;
  --el-alpha: 0.13;
  --blur-str: 18px;
  --radius: 18px;
  --text: rgba(255,255,255,0.93);
  --muted: rgba(255,255,255,0.45);
  --border: rgba(255,255,255,0.10);
  --border-h: rgba(255,255,255,0.20);
  --theme-bg: #080e18;
  --theme-bg2: #0d1826;
  --theme-bg3: #081220;
  --theme-surface: rgba(255,255,255,0.06);
  /* Text animation vars */
  --ta-speed: 0.4s;
  --ta-type: shimmer;
}

/* ‚ïê‚ïê LIGHT THEME ‚ïê‚ïê */
body.light {
  --text: rgba(15,20,35,0.93);
  --muted: rgba(15,20,35,0.45);
  --border: rgba(15,20,35,0.10);
  --border-h: rgba(15,20,35,0.22);
  --el-alpha: 0.08;
  --theme-bg: #f0f4ff;
  --theme-bg2: #e8eeff;
  --theme-bg3: #dde8ff;
  --theme-surface: rgba(0,0,0,0.04);
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{height:100%;}
body{
  min-height:100vh;height:100vh;
  font-family:'Space Grotesk',sans-serif;
  color:var(--text);
  overflow:hidden;
  background:var(--theme-bg);
  user-select:none;
  transition: background 0.5s, color 0.5s;
}

/* ‚ïê‚ïê BACKGROUND ‚ïê‚ïê */
#bg-base{position:fixed;inset:0;z-index:0;background:linear-gradient(135deg,var(--theme-bg) 0%,var(--theme-bg2) 40%,var(--theme-bg3) 100%);}
#bg-img{
  position:fixed;inset:0;z-index:1;
  background-size:cover;background-position:center;
  opacity:var(--bg-opacity);transition:opacity 0.6s;
}
#bg-grain{
  position:fixed;inset:0;z-index:2;pointer-events:none;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  opacity:0.4;
}
#vignette{position:fixed;inset:0;z-index:3;pointer-events:none;background:radial-gradient(ellipse at 50% 50%,transparent 20%,rgba(0,0,0,0.5) 100%);}
body.light #vignette{background:radial-gradient(ellipse at 50% 50%,transparent 20%,rgba(0,0,50,0.08) 100%);}
/* aurora */
#aurora{position:fixed;inset:0;z-index:2;pointer-events:none;overflow:hidden;}
.aurora-blob{
  position:absolute;border-radius:50%;filter:blur(80px);opacity:0.12;
  animation:auroraMove 20s ease-in-out infinite;
}
@keyframes auroraMove{0%,100%{transform:translate(0,0) scale(1);}33%{transform:translate(60px,-40px) scale(1.15);}66%{transform:translate(-40px,30px) scale(0.9);}}
/* particles */
#particles{position:fixed;inset:0;z-index:3;pointer-events:none;}
.pt{position:absolute;border-radius:50%;background:rgba(255,255,255,0.6);animation:ptRise linear infinite;}
body.light .pt{background:rgba(80,100,200,0.3);}
@keyframes ptRise{0%{transform:translateY(110vh) scale(0);opacity:0;}10%{opacity:1;transform:translateY(90vh) scale(1);}90%{opacity:0.2;}100%{transform:translateY(-10vh) scale(0.5);opacity:0;}}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SPLASH SCREEN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#splash{
  position:fixed;inset:0;z-index:9999;
  display:flex;align-items:center;justify-content:center;flex-direction:column;gap:16px;
  background:var(--splash-bg,#040a12);
  transition:opacity 0.8s ease, transform 0.8s ease;
}
#splash.hiding{opacity:0;transform:scale(1.05);pointer-events:none;}
#splash.hidden{display:none;}
.splash-main{
  font-family:'Playfair Display',serif;
  font-size:3.5rem;font-weight:400;
  color:var(--splash-main-color,#f0a8c0);
  text-align:center;line-height:1.2;
  opacity:0;animation:splashTextIn 0.9s 0.3s cubic-bezier(0.34,1.56,0.64,1) forwards;
}
.splash-sub{
  font-family:'Space Grotesk',sans-serif;
  font-size:0.9rem;letter-spacing:0.25em;text-transform:uppercase;
  color:var(--splash-sub-color,rgba(255,255,255,0.45));
  opacity:0;animation:splashTextIn 0.9s 0.6s ease forwards;
}
.splash-bar{
  width:0;height:2px;border-radius:99px;
  background:var(--splash-main-color,#f0a8c0);
  animation:splashBar 1.4s 0.4s ease forwards;
  margin-top:8px;
}
@keyframes splashTextIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
@keyframes splashBar{from{width:0;}to{width:200px;}}

/* ‚ïê‚ïê GLASS CARD ‚ïê‚ïê */
.glass{
  background:rgba(255,255,255,var(--el-alpha));
  backdrop-filter:blur(var(--blur-str)) saturate(160%);
  -webkit-backdrop-filter:blur(var(--blur-str)) saturate(160%);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:0 8px 32px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.08);
  transition:border-color 0.3s,box-shadow 0.3s,transform 0.3s;
  position:relative;overflow:hidden;
}
body.light .glass{box-shadow:0 8px 32px rgba(0,0,80,0.08),inset 0 1px 0 rgba(255,255,255,0.5);}
.glass:hover{border-color:var(--border-h);box-shadow:0 12px 48px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.12);}
.glass::after{
  content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;
  background:linear-gradient(115deg,rgba(255,255,255,0.05) 0%,transparent 60%);
}

/* ‚ïê‚ïê SCROLLBAR STYLING ‚ïê‚ïê */
.scrollable{
  overflow-y:auto;
  scrollbar-width:thin;
  scrollbar-color: rgba(var(--accent-rgb,240,168,192),0.5) rgba(255,255,255,0.04);
}
.scrollable::-webkit-scrollbar{width:4px;}
.scrollable::-webkit-scrollbar-track{background:rgba(255,255,255,0.03);border-radius:99px;}
.scrollable::-webkit-scrollbar-thumb{
  background:linear-gradient(to bottom, var(--accent), var(--accent2));
  border-radius:99px;
  border:1px solid rgba(255,255,255,0.1);
}
.scrollable::-webkit-scrollbar-thumb:hover{background:var(--accent);}

/* ‚ïê‚ïê LAYOUT ‚ïê‚ïê */
.page{
  position:relative;z-index:10;
  height:100vh;
  display:grid;
  grid-template-rows:auto 1fr auto;
  grid-template-columns:1fr;
  padding:16px 20px 14px;
  gap:12px;
  max-width:1440px;
  margin:0 auto;
}

/* ‚ïê‚ïê TOPBAR ‚ïê‚ïê */
.topbar{
  display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
  animation:slideDown 0.7s cubic-bezier(0.34,1.56,0.64,1) both;
}
.greeting-wrap{}
.greeting{
  font-family:'Playfair Display',serif;
  font-size:1.6rem;font-weight:400;line-height:1.25;
  color:var(--text);
}
.greeting em{font-style:italic;color:var(--accent);}
.date-line{
  font-size:0.62rem;letter-spacing:0.15em;text-transform:uppercase;
  color:var(--muted);margin-top:3px;
}
.quote-bar{
  font-size:0.72rem;font-style:italic;color:var(--accent2);
  margin-top:5px;letter-spacing:0.04em;opacity:0;
  animation:fadeUp 0.8s 0.8s ease forwards;
}
.quote-bar::before{content:'‚ú¶  ';}
.topbar-right{display:flex;gap:6px;align-items:center;flex-wrap:wrap;justify-content:flex-end;}

/* ‚ïê‚ïê TEXT ANIMATIONS ‚ïê‚ïê */

/* Shimmer */
.ta-shimmer .animated-text{
  background:linear-gradient(90deg, var(--text) 0%, var(--accent) 40%, var(--accent2) 60%, var(--text) 100%);
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:shimmerAnim 3s linear infinite;
}
@keyframes shimmerAnim{from{background-position:200% center;}to{background-position:-200% center;}}

/* Glow Pulse */
.ta-glow .animated-text{
  animation:glowPulse 2.5s ease-in-out infinite;
}
@keyframes glowPulse{0%,100%{text-shadow:0 0 10px var(--accent),0 0 20px var(--accent);}50%{text-shadow:0 0 20px var(--accent),0 0 40px var(--accent2),0 0 60px var(--accent4);}}

/* Typewriter */
.ta-typewriter .animated-text{
  overflow:hidden;white-space:nowrap;
  border-right:2px solid var(--accent);
  animation:typing 3s steps(30,end) infinite, blinkCaret 0.75s step-end infinite;
}
@keyframes typing{0%{width:0;}50%{width:100%;}100%{width:100%;}}
@keyframes blinkCaret{from,to{border-color:transparent;}50%{border-color:var(--accent);}}

/* Float */
.ta-float .animated-text{
  display:inline-block;
  animation:floatText 3s ease-in-out infinite;
}
@keyframes floatText{0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);}}

/* Wave (letter by letter) */
.ta-wave .greeting em .wave-char{
  display:inline-block;
  animation:waveChar 1.5s ease-in-out infinite;
}
@keyframes waveChar{0%,100%{transform:translateY(0);}50%{transform:translateY(-5px);}}

/* Neon */
.ta-neon .animated-text{
  color:var(--accent);
  animation:neonFlicker 3s infinite;
}
@keyframes neonFlicker{0%,19%,21%,23%,25%,54%,56%,100%{text-shadow:0 0 5px var(--accent),0 0 10px var(--accent),0 0 20px var(--accent),0 0 40px var(--accent);}20%,24%,55%{text-shadow:none;}}

/* Rainbow */
.ta-rainbow .animated-text{
  background:linear-gradient(90deg,#ff6b6b,#ffd93d,#6bcb77,#4d96ff,#c77dff,#ff6b6b);
  background-size:300% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:rainbowAnim 4s linear infinite;
}
@keyframes rainbowAnim{from{background-position:0% center;}to{background-position:300% center;}}

/* Breathe */
.ta-breathe .animated-text{
  animation:breatheText 4s ease-in-out infinite;
}
@keyframes breatheText{0%,100%{transform:scale(1);opacity:1;}50%{transform:scale(1.03);opacity:0.8;}}

/* None */
.ta-none .animated-text{}

/* ‚ïê‚ïê BUTTONS ‚ïê‚ïê */
.btn{
  display:inline-flex;align-items:center;gap:5px;
  padding:6px 13px;border-radius:99px;cursor:pointer;
  font-family:'Space Grotesk',sans-serif;font-size:0.7rem;color:var(--text);
  background:rgba(255,255,255,0.07);
  border:1px solid var(--border);
  transition:all 0.22s ease;text-decoration:none;white-space:nowrap;
  position:relative;overflow:hidden;
}
.btn::before{content:'';position:absolute;inset:0;background:rgba(255,255,255,0.06);opacity:0;transition:opacity 0.2s;}
.btn:hover::before{opacity:1;}
.btn:hover{transform:translateY(-2px);border-color:var(--border-h);}
.btn.pink{border-color:rgba(240,168,192,0.35);}
.btn.blue{border-color:rgba(136,212,245,0.35);}
.btn.green{border-color:rgba(168,230,200,0.35);}
.btn.purple{border-color:rgba(212,168,240,0.35);}
.btn.wide{width:100%;justify-content:center;margin-bottom:6px;}
.btn:active{transform:translateY(0) scale(0.97);}

/* ‚ïê‚ïê MIDDLE SECTION ‚ïê‚ïê */
.middle{
  display:grid;
  grid-template-columns:1fr 270px;
  gap:12px;
  min-height:0;
  overflow:hidden;
}

/* ‚ïê‚ïê LEFT PANEL ‚ïê‚ïê */
.left-panel{
  display:flex;flex-direction:column;gap:10px;
  animation:slideUp 0.7s 0.2s cubic-bezier(0.34,1.56,0.64,1) both;
  min-height:0;overflow:hidden;
}

.bookmark-row{display:flex;gap:6px;flex-wrap:wrap;}
.bchip{
  display:inline-flex;align-items:center;gap:5px;
  padding:5px 12px;border-radius:99px;cursor:pointer;
  text-decoration:none;color:var(--text);font-size:0.68rem;
  background:rgba(255,255,255,0.06);border:1px solid var(--border);
  transition:all 0.22s ease;white-space:nowrap;
}
.bchip:hover{transform:translateY(-2px);border-color:var(--border-h);background:rgba(255,255,255,0.1);}

.top-sites-card{padding:14px;position:relative;overflow:hidden;}
.top-sites-card .card-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.card-lbl{font-size:0.58rem;letter-spacing:0.16em;text-transform:uppercase;color:var(--muted);}
.ts-grid{display:grid;grid-template-columns:repeat(8,1fr);gap:8px;}
.ts-item{
  display:flex;flex-direction:column;align-items:center;gap:4px;
  padding:10px 4px;border-radius:12px;cursor:pointer;
  text-decoration:none;color:var(--text);
  background:rgba(255,255,255,0.04);border:1px solid transparent;
  transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1);
  position:relative;
}
.ts-item:hover{background:rgba(255,255,255,0.09);transform:translateY(-4px) scale(1.06);border-color:rgba(255,255,255,0.12);}
.ts-icon{font-size:1.4rem;}
.ts-lbl{font-size:0.55rem;color:var(--muted);text-align:center;max-width:48px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}

.habit-card{padding:13px 15px;display:flex;flex-direction:column;flex:1;min-height:0;}
.card-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
.habit-list{display:flex;flex-direction:column;gap:5px;overflow-y:auto;flex:1;}
.habit-list::-webkit-scrollbar{width:3px;}
.habit-list::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,var(--accent),var(--accent2));border-radius:9px;}
.habit-item{
  display:flex;align-items:center;gap:8px;font-size:0.72rem;
  padding:6px 8px;border-radius:10px;
  background:rgba(255,255,255,0.03);border:1px solid transparent;
  transition:all 0.2s;
}
.habit-item:hover{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.07);}
.habit-chk{
  width:18px;height:18px;border-radius:6px;
  border:1.5px solid rgba(255,255,255,0.25);
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  font-size:11px;flex-shrink:0;transition:all 0.25s cubic-bezier(0.34,1.56,0.64,1);
}
.habit-chk.done{background:rgba(168,230,200,0.2);border-color:rgba(168,230,200,0.5);color:var(--accent3);transform:scale(1.1);}
.habit-name{flex:1;transition:all 0.2s;}
.habit-name.done{opacity:0.4;text-decoration:line-through;}
.habit-streak{font-size:0.6rem;color:var(--accent);letter-spacing:0.02em;}
.habit-del{background:none;border:none;color:var(--muted);cursor:pointer;font-size:0.6rem;opacity:0;transition:opacity 0.2s;padding:0 3px;}
.habit-item:hover .habit-del{opacity:1;}
.add-habit-row{display:flex;gap:5px;margin-top:8px;flex-shrink:0;}
.add-habit-input{
  flex:1;background:rgba(255,255,255,0.05);border:1px solid var(--border);
  border-radius:10px;padding:5px 10px;color:var(--text);
  font-family:'Space Grotesk',sans-serif;font-size:0.7rem;
  outline:none;transition:border 0.2s;user-select:text;
}
.add-habit-input:focus{border-color:rgba(168,230,200,0.4);}
.add-habit-input::placeholder{color:var(--muted);}

/* ‚ïê‚ïê RIGHT PANEL ‚ïê‚ïê */
.right-panel{
  display:flex;flex-direction:column;gap:10px;
  animation:slideLeft 0.7s 0.3s cubic-bezier(0.34,1.56,0.64,1) both;
  overflow:hidden;
}

/* ‚ïê‚ïê SCROLLABLE RIGHT PANEL CARDS ‚ïê‚ïê */
.right-panel-scroll{
  display:flex;flex-direction:column;gap:10px;
  overflow-y:auto;flex:1;
  padding-right:2px;
  scrollbar-width:thin;
  scrollbar-color: rgba(240,168,192,0.4) transparent;
}
.right-panel-scroll::-webkit-scrollbar{width:3px;}
.right-panel-scroll::-webkit-scrollbar-track{background:transparent;}
.right-panel-scroll::-webkit-scrollbar-thumb{
  background:linear-gradient(to bottom, var(--accent), var(--accent4));
  border-radius:99px;
}

/* Clock */
.clock-card{
  padding:16px 18px;text-align:center;
  position:relative;overflow:hidden;flex-shrink:0;
}
.clock-orb{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:120px;height:120px;border-radius:50%;
  background:radial-gradient(circle,rgba(240,168,192,0.07) 0%,transparent 70%);
  animation:pulse 4s ease-in-out infinite;pointer-events:none;
}
@keyframes pulse{0%,100%{transform:translate(-50%,-50%) scale(1);}50%{transform:translate(-50%,-50%) scale(1.15);}}
.clock-time{
  font-family:'Playfair Display',serif;
  font-size:3rem;font-weight:400;line-height:1;
  letter-spacing:-0.02em;position:relative;
}
.clock-ampm{font-size:0.9rem;opacity:0.4;margin-left:3px;}
.clock-sec{
  display:block;font-family:'JetBrains Mono',monospace;
  font-size:0.58rem;color:var(--accent);letter-spacing:0.15em;margin-top:3px;
}
.clock-sub{font-size:0.58rem;color:var(--muted);letter-spacing:0.06em;margin-top:3px;}

/* Weather */
.wx-card{padding:11px 14px;display:flex;align-items:center;gap:10px;cursor:pointer;flex-shrink:0;}
.wx-icon{font-size:2rem;animation:floatIcon 3s ease-in-out infinite;}
@keyframes floatIcon{0%,100%{transform:translateY(0);}50%{transform:translateY(-4px);}}
.wx-temp{font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:400;}
.wx-detail{flex:1;}
.wx-city{font-size:0.6rem;color:var(--muted);}
.wx-desc{font-size:0.62rem;color:var(--accent2);margin-top:1px;}
.wx-feels{font-size:0.58rem;color:var(--muted);margin-top:1px;}

/* Pomodoro */
.pomo-card{padding:12px 14px;flex-shrink:0;}
.pomo-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px;}
.pomo-tabs{display:flex;gap:3px;margin-bottom:8px;}
.pomo-tab{
  flex:1;text-align:center;padding:4px 0;border-radius:8px;
  font-size:0.56rem;letter-spacing:0.1em;text-transform:uppercase;
  cursor:pointer;border:1px solid transparent;color:var(--muted);transition:all 0.2s;
}
.pomo-tab.active{background:rgba(240,168,192,0.12);border-color:rgba(240,168,192,0.3);color:var(--accent);}
.pomo-ring-wrap{display:flex;justify-content:center;margin-bottom:7px;position:relative;}
.pomo-ring{width:76px;height:76px;}
.pomo-ring-time{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:400;
}
.pomo-controls{display:flex;gap:5px;justify-content:center;}
.pomo-btn{
  padding:5px 12px;border-radius:20px;cursor:pointer;font-size:0.68rem;
  background:rgba(255,255,255,0.06);border:1px solid var(--border);
  color:var(--text);transition:all 0.2s;font-family:'Space Grotesk',sans-serif;
}
.pomo-btn:hover{background:rgba(240,168,192,0.12);border-color:rgba(240,168,192,0.35);}
.pomo-btn.primary{background:rgba(240,168,192,0.12);border-color:rgba(240,168,192,0.4);}
.pomo-sessions{font-size:0.58rem;color:var(--muted);text-align:center;margin-top:5px;}

/* Notes */
.notes-card{padding:11px 14px;display:flex;flex-direction:column;min-height:160px;}
.notes-tabs{display:flex;gap:3px;margin-bottom:6px;flex-shrink:0;}
.note-tab{
  padding:3px 9px;border-radius:7px;font-size:0.56rem;cursor:pointer;
  border:1px solid transparent;color:var(--muted);transition:all 0.2s;letter-spacing:0.06em;
}
.note-tab.active{background:rgba(136,212,245,0.1);border-color:rgba(136,212,245,0.3);color:var(--accent2);}
.notes-area{
  background:none;border:none;outline:none;resize:none;
  width:100%;flex:1;min-height:80px;
  font-family:'Space Grotesk',sans-serif;font-size:0.74rem;color:var(--text);line-height:1.65;
  user-select:text;
  overflow-y:auto;
  scrollbar-width:thin;
  scrollbar-color: rgba(136,212,245,0.4) transparent;
}
.notes-area::-webkit-scrollbar{width:3px;}
.notes-area::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,var(--accent2),var(--accent4));border-radius:99px;}
.notes-area::placeholder{color:rgba(255,255,255,0.18);}
.notes-footer{display:flex;justify-content:space-between;align-items:center;margin-top:4px;flex-shrink:0;}
.notes-count{font-size:0.55rem;color:var(--muted);}
.notes-save{font-size:0.55rem;color:var(--muted);}

/* Countdown */
.cdown-card{padding:10px 14px;flex-shrink:0;}
.cdown-inner{display:flex;justify-content:space-around;gap:8px;}
.cdown-unit{text-align:center;}
.cdown-num{font-family:'Playfair Display',serif;font-size:1.4rem;font-weight:400;color:var(--accent2);line-height:1;
  transition:transform 0.2s cubic-bezier(0.34,1.56,0.64,1);}
.cdown-num.tick{animation:cdownTick 0.25s cubic-bezier(0.34,1.56,0.64,1);}
@keyframes cdownTick{0%{transform:translateY(-6px);opacity:0.5;}100%{transform:translateY(0);opacity:1;}}
.cdown-lbl{font-size:0.52rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--muted);}
.cdown-event{font-size:0.58rem;color:var(--muted);text-align:center;margin-top:5px;}

/* ‚ïê‚ïê BOTTOM ‚ïê‚ïê */
.bottom-section{
  display:flex;flex-direction:column;gap:8px;
  animation:slideUp 0.7s 0.4s cubic-bezier(0.34,1.56,0.64,1) both;
  flex-shrink:0;
}

.ql-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;}
.ql-lbl{font-size:0.58rem;letter-spacing:0.16em;text-transform:uppercase;color:var(--muted);}
.quick-links{display:flex;gap:7px;overflow-x:auto;padding-bottom:2px;
  scrollbar-width:thin;scrollbar-color:rgba(240,168,192,0.3) transparent;}
.quick-links::-webkit-scrollbar{height:2px;}
.quick-links::-webkit-scrollbar-thumb{background:linear-gradient(to right,var(--accent),var(--accent2));border-radius:99px;}
.ql-item{
  display:flex;flex-direction:column;align-items:center;gap:4px;
  padding:9px 11px;border-radius:14px;cursor:pointer;
  text-decoration:none;color:var(--text);
  background:rgba(255,255,255,0.06);
  border:1px solid var(--border);
  transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1);
  position:relative;overflow:hidden;flex-shrink:0;min-width:64px;
}
.ql-item::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,0.08),transparent);
  opacity:0;transition:opacity 0.3s;
}
.ql-item:hover{transform:translateY(-5px) scale(1.08);border-color:var(--border-h);}
.ql-item:hover::before{opacity:1;}
.ql-icon{font-size:1.25rem;}
.ql-lbl-s{font-size:0.56rem;color:var(--muted);text-align:center;}
.ql-del{
  position:absolute;top:3px;right:3px;
  background:rgba(0,0,0,0.7);border:none;border-radius:50%;
  width:13px;height:13px;cursor:pointer;color:white;
  font-size:7px;display:none;align-items:center;justify-content:center;
  transition:all 0.2s;
}
.ql-add{border-style:dashed!important;opacity:0.35;}
.ql-add:hover{opacity:0.9;}

/* Search */
.search-row{display:flex;gap:8px;align-items:center;}
.search-bar{
  display:flex;align-items:center;gap:10px;
  padding:10px 16px;flex:1;border-radius:99px!important;
}
#searchInput{
  flex:1;background:none;border:none;outline:none;
  font-family:'Space Grotesk',sans-serif;font-size:0.9rem;
  color:var(--text);caret-color:var(--accent);user-select:text;
}
#searchInput::placeholder{color:var(--muted);}
.s-icon{font-size:0.9rem;opacity:0.35;}
.engine-sel{
  background:rgba(0,0,0,0.3);border:1px solid var(--border);
  border-radius:8px;padding:3px 7px;color:var(--text);
  font-family:'Space Grotesk',sans-serif;font-size:0.64rem;cursor:pointer;outline:none;
}
.engine-sel option{background:#0d1826;}
.ai-pill{
  display:flex;align-items:center;gap:5px;
  padding:10px 14px;border-radius:99px;cursor:pointer;
  font-family:'Space Grotesk',sans-serif;font-size:0.7rem;color:var(--text);
  text-decoration:none;flex-shrink:0;transition:all 0.22s;
  border:1px solid;
}
.ai-pill.pink{background:rgba(240,168,192,0.08);border-color:rgba(240,168,192,0.28);}
.ai-pill.blue{background:rgba(136,212,245,0.08);border-color:rgba(136,212,245,0.28);}
.ai-pill:hover{transform:translateY(-2px);}

/* ‚ïê‚ïê SETTINGS PANEL ‚ïê‚ïê */
#sOverlay{position:fixed;inset:0;z-index:199;background:rgba(0,0,0,0.3);backdrop-filter:blur(4px);opacity:0;pointer-events:none;transition:opacity 0.3s;}
#sOverlay.open{opacity:1;pointer-events:all;}
#sPanel{
  position:fixed;top:0;right:-420px;height:100vh;
  width:400px;z-index:200;
  background:rgba(6,12,22,0.96);
  backdrop-filter:blur(40px);
  border-left:1px solid var(--border);
  padding:22px 20px;
  overflow-y:auto;
  transition:right 0.4s cubic-bezier(0.4,0,0.2,1);
  scrollbar-width:thin;scrollbar-color:rgba(255,255,255,0.1) transparent;
}
body.light #sPanel{background:rgba(240,244,255,0.97);}
#sPanel.open{right:0;}
#sPanel::-webkit-scrollbar{width:3px;}
#sPanel::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,var(--accent),var(--accent4));border-radius:9px;}
.s-title{font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:400;margin-bottom:18px;color:var(--accent);}
.s-section{margin-bottom:14px;}
.s-lbl{font-size:0.58rem;letter-spacing:0.16em;text-transform:uppercase;color:var(--muted);margin-bottom:7px;display:block;}
.s-divider{border:none;border-top:1px solid rgba(255,255,255,0.06);margin:12px 0;}
.s-slider{
  -webkit-appearance:none;width:100%;height:3px;
  border-radius:99px;outline:none;cursor:pointer;
  background:linear-gradient(to right,var(--accent) 0%,var(--accent) var(--pct,50%),rgba(255,255,255,0.1) var(--pct,50%),rgba(255,255,255,0.1) 100%);
  display:block;margin-bottom:3px;
}
.s-slider::-webkit-slider-thumb{-webkit-appearance:none;width:13px;height:13px;border-radius:50%;background:white;box-shadow:0 0 6px rgba(240,168,192,0.6);cursor:pointer;}
.s-val{font-size:0.66rem;color:var(--accent);text-align:right;display:block;margin-bottom:5px;}
.s-toggle{
  display:flex;align-items:center;gap:10px;
  padding:8px 11px;border-radius:10px;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  cursor:pointer;transition:all 0.2s;font-size:0.74rem;margin-bottom:6px;
}
.s-toggle:hover{background:rgba(255,255,255,0.07);}
.s-toggle.active{background:rgba(240,168,192,0.1);border-color:rgba(240,168,192,0.28);}
.t-dot{width:28px;height:16px;border-radius:99px;background:rgba(255,255,255,0.15);position:relative;transition:background 0.2s;flex-shrink:0;}
.s-toggle.active .t-dot{background:var(--accent);}
.t-dot::after{content:'';position:absolute;top:2px;left:2px;width:12px;height:12px;border-radius:50%;background:white;transition:transform 0.2s;}
.s-toggle.active .t-dot::after{transform:translateX(12px);}
.s-input{
  width:100%;padding:7px 11px;border-radius:10px;
  background:rgba(255,255,255,0.05);border:1px solid var(--border);
  color:var(--text);font-family:'Space Grotesk',sans-serif;font-size:0.78rem;
  outline:none;margin-bottom:7px;transition:border 0.2s;user-select:text;
}
.s-input:focus{border-color:rgba(240,168,192,0.4);}
.s-file-lbl{
  display:block;width:100%;padding:16px;text-align:center;
  border:1.5px dashed rgba(255,255,255,0.15);border-radius:12px;
  cursor:pointer;color:var(--muted);font-size:0.72rem;
  transition:all 0.2s;margin-bottom:7px;
}
.s-file-lbl:hover{border-color:rgba(240,168,192,0.4);color:var(--text);}
.swatch-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px;}
.swatch{
  width:26px;height:26px;border-radius:50%;cursor:pointer;
  border:2px solid transparent;transition:all 0.2s;
}
.swatch:hover,.swatch.active{border-color:white;transform:scale(1.15);}

/* Theme selector */
.theme-row{display:flex;gap:8px;margin-bottom:8px;}
.theme-btn{
  flex:1;padding:10px;border-radius:12px;cursor:pointer;
  border:2px solid var(--border);font-size:0.7rem;
  font-family:'Space Grotesk',sans-serif;color:var(--text);
  transition:all 0.2s;text-align:center;background:rgba(255,255,255,0.04);
}
.theme-btn.active{border-color:var(--accent);background:rgba(240,168,192,0.08);}
.theme-btn:hover{border-color:var(--border-h);}

/* Text animation selector */
.ta-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:5px;margin-bottom:8px;}
.ta-btn{
  padding:7px 10px;border-radius:9px;cursor:pointer;
  border:1px solid var(--border);font-size:0.64rem;
  font-family:'Space Grotesk',sans-serif;color:var(--muted);
  transition:all 0.2s;text-align:center;background:rgba(255,255,255,0.03);
}
.ta-btn.active{border-color:var(--accent2);background:rgba(136,212,245,0.08);color:var(--accent2);}
.ta-btn:hover{border-color:var(--border-h);color:var(--text);}

/* ‚ïê‚ïê SPLASH SETTINGS ‚ïê‚ïê */
.color-pair{display:flex;gap:8px;margin-bottom:6px;}
.color-pair label{font-size:0.6rem;color:var(--muted);display:block;margin-bottom:3px;}
.color-pair-item{flex:1;}

/* ‚ïê‚ïê MODALS ‚ïê‚ïê */
.modal-overlay{
  position:fixed;inset:0;z-index:300;
  background:rgba(0,0,0,0.5);backdrop-filter:blur(10px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:opacity 0.3s;
}
.modal-overlay.open{opacity:1;pointer-events:all;}
.modal{
  width:400px;padding:24px;border-radius:22px;
  background:rgba(6,12,24,0.92);
  backdrop-filter:blur(40px);
  border:1px solid rgba(255,255,255,0.12);
  box-shadow:0 32px 80px rgba(0,0,0,0.6);
  transform:scale(0.92) translateY(12px);transition:transform 0.35s cubic-bezier(0.34,1.56,0.64,1);
}
.modal-overlay.open .modal{transform:scale(1) translateY(0);}
.modal h2{font-family:'Playfair Display',serif;font-size:1.25rem;font-weight:400;margin-bottom:14px;color:var(--accent);}
.modal label{font-size:0.6rem;color:var(--muted);letter-spacing:0.1em;display:block;margin-bottom:3px;text-transform:uppercase;}
.modal input[type=text]{
  width:100%;padding:7px 11px;border-radius:10px;
  background:rgba(255,255,255,0.06);border:1px solid var(--border);
  color:var(--text);font-family:'Space Grotesk',sans-serif;font-size:0.82rem;
  outline:none;margin-bottom:9px;transition:border 0.2s;user-select:text;
}
.modal input[type=text]:focus{border-color:rgba(240,168,192,0.45);}
.modal-actions{display:flex;gap:7px;justify-content:flex-end;margin-top:4px;}

/* ‚ïê‚ïê TOAST ‚ïê‚ïê */
#toast{
  position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(16px);
  background:rgba(6,12,24,0.9);border:1px solid rgba(255,255,255,0.13);
  border-radius:99px;padding:8px 20px;font-size:0.72rem;
  color:var(--text);z-index:500;opacity:0;
  transition:opacity 0.3s,transform 0.3s;pointer-events:none;
  backdrop-filter:blur(20px);
}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

/* ‚ïê‚ïê FOCUS MODE ‚ïê‚ïê */
#focusMode{
  position:fixed;inset:0;z-index:400;
  background:rgba(4,9,18,0.96);
  backdrop-filter:blur(30px);
  display:flex;align-items:center;justify-content:center;
  flex-direction:column;gap:16px;
  opacity:0;pointer-events:none;transition:opacity 0.5s;
  overflow:auto;
  scrollbar-width:thin;scrollbar-color:rgba(240,168,192,0.3) transparent;
}
#focusMode::-webkit-scrollbar{width:3px;}
#focusMode::-webkit-scrollbar-thumb{background:var(--accent);border-radius:99px;}
#focusMode.open{opacity:1;pointer-events:all;}
.focus-clock{font-family:'Playfair Display',serif;font-size:8rem;font-weight:400;color:var(--accent);line-height:1;}
.focus-date{font-size:0.8rem;letter-spacing:0.2em;text-transform:uppercase;color:var(--muted);}
.focus-quote{font-size:1rem;font-style:italic;color:var(--accent2);opacity:0.7;max-width:500px;text-align:center;}
.focus-exit{position:fixed;top:24px;right:24px;}

/* ‚ïê‚ïê ANIMATIONS ‚ïê‚ïê */
@keyframes slideDown{from{opacity:0;transform:translateY(-18px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
@keyframes slideLeft{from{opacity:0;transform:translateX(18px)}to{opacity:1;transform:translateX(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.qfade{animation:qf 0.5s ease both;}
@keyframes qf{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}

/* ‚ïê‚ïê STAT BAR ‚ïê‚ïê */
.stat-bar{
  display:flex;gap:14px;align-items:center;
  padding:7px 14px;border-radius:99px;
  font-size:0.62rem;color:var(--muted);
  flex-shrink:0;
}
.stat-item{display:flex;align-items:center;gap:4px;}
.stat-dot{width:6px;height:6px;border-radius:50%;}

::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.1);border-radius:99px;}
</style>
</head>
<body>
  <script src="greeting.js"></script>
<script src="animations.js"></script>
<!-- ‚ïê‚ïê SPLASH SCREEN ‚ïê‚ïê -->
<div id="splash" style="
  background-image:
    linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
    url('https://i.pinimg.com/1200x/2a/fa/a6/2afaa628449317bace9703d0a1492571.jpg');
  background-size: cover;
  background-position: center;
">
  <div class="splash-main" id="splashMain">‚ú¶ Prasann's Space</div>
  <div class="splash-bar" id="splashBar"></div>
  <div class="splash-sub" id="splashSub">Welcome back</div>
</div>

<div id="bg-base"></div>
<div id="bg-img"></div>
<div id="bg-grain"></div>
<div id="aurora">
  <div class="aurora-blob" style="width:500px;height:500px;top:-100px;left:-100px;background:radial-gradient(circle,#f0a8c0,transparent 70%);animation-duration:22s;"></div>
  <div class="aurora-blob" style="width:400px;height:400px;bottom:-80px;right:-80px;background:radial-gradient(circle,#88d4f5,transparent 70%);animation-duration:18s;animation-delay:-7s;"></div>
  <div class="aurora-blob" style="width:350px;height:350px;top:40%;left:40%;background:radial-gradient(circle,#a8e6c8,transparent 70%);animation-duration:25s;animation-delay:-12s;opacity:0.08;"></div>
</div>
<div id="vignette"></div>
<div id="particles"></div>

<!-- FOCUS MODE -->
<div id="focusMode">
  <div class="focus-clock" id="focusClock">00:00</div>
  <div class="focus-date" id="focusDate"></div>
  <div class="focus-quote" id="focusQuote"></div>
  <button class="btn pink focus-exit" onclick="toggleFocus()">‚úï Exit Focus</button>
</div>

<div class="page">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="greeting-wrap">
      <div class="greeting" id="greeting"></div>
      <div class="date-line" id="dateText"></div>
      <div class="quote-bar" id="quoteStrip"></div>
    </div>
    <div class="topbar-right">
      <div class="glass stat-bar">
        <div class="stat-item"><div class="stat-dot" style="background:var(--accent3)"></div><span id="habitStat">0/0 habits</span></div>
        <div class="stat-item"><div class="stat-dot" style="background:var(--accent)"></div><span id="pomoStat">0 sessions</span></div>
      </div>
      <button class="btn purple" onclick="toggleFocus()">‚óâ Focus</button>
      <button class="btn blue" onclick="openModal('link')">Ôºã Link</button>
      <button class="btn green" onclick="openModal('habit')">Ôºã Habit</button>
      <button class="btn pink" onclick="openSettings()">‚öô Settings</button>
    </div>
  </div>

  <!-- MIDDLE -->
  <div class="middle">
    <!-- LEFT -->
    <div class="left-panel">
      <div class="bookmark-row" id="bookmarks"></div>
      <div class="glass top-sites-card" style="position:relative;">
        <div class="card-hdr">
          <span class="card-lbl">‚ö° Pinned Sites</span>
          <button class="btn" style="padding:3px 9px;font-size:0.58rem;" onclick="openModal('site')">Ôºã</button>
        </div>
        <div class="ts-grid" id="topSites"></div>
      </div>
      <div class="glass habit-card" style="position:relative;flex:1;min-height:0;">
        <div class="card-hdr" style="flex-shrink:0;">
          <span class="card-lbl">‚úì Daily Habits</span>
          <span style="font-size:0.58rem;color:var(--muted);" id="habitDate"></span>
        </div>
        <div class="habit-list" id="habitList"></div>
        <div class="add-habit-row">
          <input class="add-habit-input" type="text" id="habitInput" placeholder="New habit‚Ä¶">
          <button class="btn green" style="padding:5px 9px;font-size:0.64rem;flex-shrink:0;" onclick="addHabit()">Add</button>
        </div>
      </div>
    </div>

    <!-- RIGHT (with scroll) -->
    <div class="right-panel">
      <!-- Clock stays fixed top -->
      <div class="glass clock-card" style="position:relative;flex-shrink:0;">
        <div class="clock-orb"></div>
        <div class="clock-time" id="clock">00:00<span class="clock-ampm" id="clockAmpm">AM</span></div>
        <span class="clock-sec" id="clockSec">00s</span>
        <div class="clock-sub" id="clockSub"></div>
      </div>
      <!-- Scrollable rest -->
      <div class="right-panel-scroll">
        <div class="glass wx-card" id="wxCard" onclick="openSettings()">
          <div class="wx-icon" id="wxIcon">‚õÖ</div>
          <div class="wx-detail">
            <div class="wx-temp" id="wxTemp">‚Äî¬∞</div>
            <div class="wx-city" id="wxCity">Set city in Settings</div>
            <div class="wx-desc" id="wxDesc"></div>
            <div class="wx-feels" id="wxFeels"></div>
          </div>
        </div>
        <div class="glass cdown-card" id="cdownCard" onclick="openModal('countdown')">
          <div class="card-hdr" style="margin-bottom:6px;">
            <span class="card-lbl">‚è≥ Countdown</span>
            <button class="btn" style="padding:2px 8px;font-size:0.56rem;" onclick="event.stopPropagation();openModal('countdown')">Set</button>
          </div>
          <div class="cdown-inner">
            <div class="cdown-unit"><div class="cdown-num" id="cdownD">--</div><div class="cdown-lbl">days</div></div>
            <div class="cdown-unit"><div class="cdown-num" id="cdownH">--</div><div class="cdown-lbl">hrs</div></div>
            <div class="cdown-unit"><div class="cdown-num" id="cdownM">--</div><div class="cdown-lbl">min</div></div>
            <div class="cdown-unit"><div class="cdown-num" id="cdownS">--</div><div class="cdown-lbl">sec</div></div>
          </div>
          <div class="cdown-event" id="cdownLabel">Set a countdown event</div>
        </div>
        <div class="glass pomo-card">
          <div class="pomo-header">
            <span class="card-lbl">üçÖ Focus Timer</span>
            <span style="font-size:0.56rem;color:var(--muted);" id="pomoStatus">Paused</span>
          </div>
          <div class="pomo-tabs">
            <div class="pomo-tab active" id="pomoTabFocus" onclick="setPomoMode('focus')">Focus</div>
            <div class="pomo-tab" id="pomoTabShort" onclick="setPomoMode('short')">Short</div>
            <div class="pomo-tab" id="pomoTabLong" onclick="setPomoMode('long')">Long</div>
          </div>
          <div class="pomo-ring-wrap">
            <svg class="pomo-ring" viewBox="0 0 76 76">
              <circle cx="38" cy="38" r="32" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="4"/>
              <circle id="pomoArc" cx="38" cy="38" r="32" fill="none" stroke="var(--accent)" stroke-width="4"
                stroke-linecap="round" stroke-dasharray="201" stroke-dashoffset="0"
                transform="rotate(-90 38 38)" style="transition:stroke-dashoffset 0.5s linear,stroke 0.5s;"/>
            </svg>
            <div class="pomo-ring-time" id="pomoTime">25:00</div>
          </div>
          <div class="pomo-controls">
            <button class="pomo-btn" onclick="resetPomo()">‚Ü∫</button>
            <button class="pomo-btn primary" id="pomoStartBtn" onclick="togglePomo()">‚ñ∂ Start</button>
            <button class="pomo-btn" onclick="skipPomo()">‚è≠</button>
          </div>
          <div class="pomo-sessions" id="pomoSessions">Sessions: 0</div>
        </div>
        <div class="glass notes-card">
          <div class="card-hdr" style="margin-bottom:4px;flex-shrink:0;">
            <span class="card-lbl">‚ú¶ Notes</span>
          </div>
          <div class="notes-tabs" id="notesTabs"></div>
          <textarea class="notes-area" id="notes" placeholder="Drop a thought‚Ä¶" rows="5"></textarea>
          <div class="notes-footer">
            <span class="notes-count" id="notesCount">0 chars</span>
            <span class="notes-save" id="notesSave">auto-saved</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- BOTTOM -->
  <div class="bottom-section">
    <div>
      <div class="ql-header">
        <span class="ql-lbl">‚ö° Quick Access</span>
        <button class="btn" style="padding:3px 10px;font-size:0.58rem;" onclick="openModal('link')">Ôºã Add</button>
      </div>
      <div class="quick-links" id="quickLinks"></div>
    </div>
    <div class="search-row">
      <form class="glass search-bar" onsubmit="doSearch(event)">
        <span class="s-icon">‚åï</span>
        <input type="text" id="searchInput" placeholder="Search or type a URL‚Ä¶ (Ctrl+K)" autocomplete="off"/>
        <select class="engine-sel" id="engineSelect">
          <option value="https://www.google.com/search?q=">Google</option>
          <option value="https://duckduckgo.com/?q=">DuckDuckGo</option>
          <option value="https://www.bing.com/search?q=">Bing</option>
          <option value="https://search.brave.com/search?q=">Brave</option>
          <option value="https://www.perplexity.ai/search?q=">Perplexity</option>
          <option value="https://www.youtube.com/results?search_query=">YouTube</option>
        </select>
      </form>
      <a class="ai-pill pink" href="https://claude.ai" target="_blank">ü§ñ Claude</a>
      <a class="ai-pill blue" href="https://chat.openai.com" target="_blank">‚ú¶ ChatGPT</a>
    </div>
  </div>
</div>

<!-- TOAST -->
<div id="toast"></div>

<!-- SETTINGS PANEL -->
<div id="sOverlay" onclick="closeSettings()"></div>
<div id="sPanel">
  <div class="s-title">‚ú¶ Customize</div>

  <!-- THEME -->
  <div class="s-section">
    <span class="s-lbl">üåì Theme</span>
    <div class="theme-row">
      <div class="theme-btn active" id="themeDark" onclick="setTheme('dark')">üåô Dark</div>
      <div class="theme-btn" id="themeLight" onclick="setTheme('light')">‚òÄÔ∏è Light</div>
    </div>
  </div>
  <hr class="s-divider">

  <!-- SPLASH SETTINGS -->
  <div class="s-section">
    <span class="s-lbl">üöÄ Opening Animation</span>
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Main Text</label>
    <input class="s-input" type="text" id="splashMainText" placeholder="‚ú¶ Prasann's Space" value="‚ú¶ Prasann's Space">
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Sub Text</label>
    <input class="s-input" type="text" id="splashSubText" placeholder="Welcome back" value="Welcome back">
    <div class="color-pair">
      <div class="color-pair-item">
        <label>Main Color</label>
        <input type="color" id="splashMainColor" value="#f0a8c0" style="width:100%;height:32px;border-radius:8px;border:1px solid var(--border);cursor:pointer;background:none;padding:2px;">
      </div>
      <div class="color-pair-item">
        <label>Sub Color</label>
        <input type="color" id="splashSubColor" value="#88d4f5" style="width:100%;height:32px;border-radius:8px;border:1px solid var(--border);cursor:pointer;background:none;padding:2px;">
      </div>
      <div class="color-pair-item">
        <label>BG Color</label>
        <input type="color" id="splashBgColor" value="#040a12" style="width:100%;height:32px;border-radius:8px;border:1px solid var(--border);cursor:pointer;background:none;padding:2px;">
      </div>
    </div>
    <button class="btn pink wide" onclick="saveSplashSettings()">Save Splash</button>
    <button class="btn wide" style="opacity:0.5;" onclick="previewSplash()">Preview Splash</button>
  </div>
  <hr class="s-divider">

  <!-- TEXT ANIMATIONS -->
  <div class="s-section">
    <span class="s-lbl">‚ú® Text Animation</span>
    <div class="ta-grid" id="taGrid">
      <div class="ta-btn active" data-ta="shimmer" onclick="setTextAnim(this,'shimmer')">Shimmer</div>
      <div class="ta-btn" data-ta="glow" onclick="setTextAnim(this,'glow')">Glow Pulse</div>
      <div class="ta-btn" data-ta="float" onclick="setTextAnim(this,'float')">Float</div>
      <div class="ta-btn" data-ta="wave" onclick="setTextAnim(this,'wave')">Wave</div>
      <div class="ta-btn" data-ta="neon" onclick="setTextAnim(this,'neon')">Neon</div>
      <div class="ta-btn" data-ta="rainbow" onclick="setTextAnim(this,'rainbow')">Rainbow</div>
      <div class="ta-btn" data-ta="breathe" onclick="setTextAnim(this,'breathe')">Breathe</div>
      <div class="ta-btn" data-ta="none" onclick="setTextAnim(this,'none')">None</div>
    </div>
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Animation Speed</label>
    <input type="range" class="s-slider" id="taSpeedSlider" min="1" max="10" value="4" oninput="onTaSpeed(this)">
    <span class="s-val" id="taSpeedVal">0.4s</span>
  </div>
  <hr class="s-divider">

  <!-- BACKGROUND -->
  <div class="s-section">
    <span class="s-lbl">üñº Background Image</span>
    <label class="s-file-lbl" for="bgFile" id="bgFileLbl">Click to upload (max 5MB)</label>
    <input type="file" id="bgFile" accept="image/*" style="display:none" onchange="handleBgUpload(this)">
    <input class="s-input" type="text" id="bgUrl" placeholder="‚Ä¶or paste image URL">
    <button class="btn pink wide" onclick="applyBg()">Apply Background</button>
    <button class="btn wide" style="opacity:0.45;" onclick="clearBg()">‚úï Remove</button>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Background Opacity</span>
    <input type="range" class="s-slider" id="bgOpSlider" min="0" max="100" value="100" oninput="onBgOp(this)">
    <span class="s-val" id="bgOpVal">100%</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Element Transparency</span>
    <input type="range" class="s-slider" id="elAlphaSlider" min="3" max="40" value="13" oninput="onElAlpha(this)">
    <span class="s-val" id="elAlphaVal">13%</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Glass Blur</span>
    <div class="s-toggle" id="blurToggle" onclick="toggleBlur()">
      <div class="t-dot"></div><span>Enable glass blur</span>
    </div>
    <div id="blurWrap" style="display:none">
      <input type="range" class="s-slider" id="blurSlider" min="0" max="40" value="18" oninput="onBlur(this)">
      <span class="s-val" id="blurVal">18px</span>
    </div>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Aurora Intensity</span>
    <input type="range" class="s-slider" id="auroraSlider" min="0" max="30" value="12" oninput="onAurora(this)">
    <span class="s-val" id="auroraVal">12%</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">‚Ä¢ Particles</span>
    <input type="range" class="s-slider" id="ptSlider" min="0" max="80" value="20" oninput="onParticles(this)">
    <span class="s-val" id="ptVal">20</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">‚õÖ Weather City</span>
    <input class="s-input" type="text" id="wxCityInput" placeholder="e.g. Bengaluru">
    <button class="btn blue wide" onclick="fetchWeather()">Fetch Weather</button>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Accent Color</span>
    <div class="swatch-row" id="swatchRow">
      <div class="swatch active" data-c="#f0a8c0" style="background:#f0a8c0" onclick="setAccent(this)"></div>
      <div class="swatch" data-c="#88d4f5" style="background:#88d4f5" onclick="setAccent(this)"></div>
      <div class="swatch" data-c="#a8e6c8" style="background:#a8e6c8" onclick="setAccent(this)"></div>
      <div class="swatch" data-c="#d4a8f0" style="background:#d4a8f0" onclick="setAccent(this)"></div>
      <div class="swatch" data-c="#f5d488" style="background:#f5d488" onclick="setAccent(this)"></div>
      <div class="swatch" data-c="#f0a888" style="background:#f0a888" onclick="setAccent(this)"></div>
      <input type="color" id="accentPicker" style="width:26px;height:26px;border-radius:50%;border:2px solid rgba(255,255,255,0.2);cursor:pointer;padding:0;" onchange="setAccentCustom(this)">
    </div>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">üçÖ Pomodoro (minutes)</span>
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Focus</label>
    <input type="range" class="s-slider" id="pomoFSlider" min="5" max="60" value="25" oninput="onPomoF(this)">
    <span class="s-val" id="pomoFVal">25m</span>
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Short Break</label>
    <input type="range" class="s-slider" id="pomoSSlider" min="1" max="15" value="5" oninput="onPomoS(this)">
    <span class="s-val" id="pomoSVal">5m</span>
    <label style="font-size:0.62rem;color:var(--muted);display:block;margin-bottom:3px;">Long Break</label>
    <input type="range" class="s-slider" id="pomoLSlider" min="5" max="30" value="15" oninput="onPomoL(this)">
    <span class="s-val" id="pomoLVal">15m</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Quote Speed (seconds)</span>
    <input type="range" class="s-slider" id="qIntSlider" min="5" max="60" value="15" oninput="onQInt(this)">
    <span class="s-val" id="qIntVal">15s</span>
  </div>
  <hr class="s-divider">

  <div class="s-section">
    <span class="s-lbl">Name in Greeting</span>
    <input class="s-input" type="text" id="greetName" placeholder="Prasann">
    <button class="btn blue wide" onclick="saveGreetName()">Save</button>
  </div>
  <hr class="s-divider">

  <button class="btn wide" style="opacity:0.4;" onclick="resetAll()">‚Ü∫ Reset Everything</button>
</div>

<!-- MODALS -->
<div class="modal-overlay" id="linkModal">
  <div class="modal">
    <h2>‚ú¶ Add Quick Link</h2>
    <label>Name</label><input type="text" id="newName" placeholder="YouTube">
    <label>URL</label><input type="text" id="newUrl" placeholder="https://youtube.com">
    <label>Emoji</label><input type="text" id="newIcon" placeholder="‚ñ∂">
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('link')">Cancel</button>
      <button class="btn pink" onclick="addLink()">Add ‚ú¶</button>
    </div>
  </div>
</div>
<div class="modal-overlay" id="habitModal">
  <div class="modal">
    <h2>‚ú¶ Add Daily Habit</h2>
    <label>Habit Name</label><input type="text" id="habitModalName" placeholder="Morning workout">
    <label>Emoji</label><input type="text" id="habitModalIcon" placeholder="üí™">
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('habit')">Cancel</button>
      <button class="btn green" onclick="addHabitModal()">Add ‚ú¶</button>
    </div>
  </div>
</div>
<div class="modal-overlay" id="siteModal">
  <div class="modal">
    <h2>‚ú¶ Add Pinned Site</h2>
    <label>Name</label><input type="text" id="siteName" placeholder="GitHub">
    <label>URL</label><input type="text" id="siteUrl" placeholder="https://github.com">
    <label>Emoji</label><input type="text" id="siteIcon" placeholder="üêô">
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('site')">Cancel</button>
      <button class="btn blue" onclick="addSite()">Add ‚ú¶</button>
    </div>
  </div>
</div>
<div class="modal-overlay" id="countdownModal">
  <div class="modal">
    <h2>‚ú¶ Countdown Timer</h2>
    <label>Event Name</label><input type="text" id="cdownName" placeholder="My Birthday">
    <label>Target Date</label><input type="text" id="cdownDate" placeholder="2025-12-31">
    <div class="modal-actions">
      <button class="btn" onclick="closeModal('countdown')">Cancel</button>
      <button class="btn purple" onclick="setCountdown()">Set ‚ú¶</button>
    </div>
  </div>
</div>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DATA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const MOTIVATIONS = [
  "Show up even when it sucks",
  "Nobody is coming to save you",
  "One hour a day changes everything",
  "Pain now or regret forever",
  "You're closer than you think",
  "Skill beats luck every time",
  "Earn the confidence",
  "Silent work, loud results",
  "Do the boring work brilliantly",
  "Become undeniable",
  "Today's effort is tomorrow's advantage",
  "Progress is built quietly",
  "No shortcuts. No excuses. Only growth.",
  "The gap between who you are and who you want to be is what you do daily",
  "Discipline is choosing between what you want now and what you want most"
];

let GREETINGS_POOL = [
  "Hey Prasann, look who finally showed up.",
  "Good morning, trouble. I was wondering when you'd appear.",
  "Hey you. Yeah you. Don't act surprised, I was waiting.",
  "Well well, there you are. My day just upgraded.",
  "Hey Prasann. Come here. I missed you more than I'm admitting.",
  "Look alive. I'm here and I've got my eyes on you.",
  "Hey. Don't scroll past me like that."
];

const DEF_LINKS = [
  {icon:'‚ñ∂',label:'YouTube',url:'https://youtube.com'},
  {icon:'ùïè',label:'Twitter',url:'https://twitter.com'},
  {icon:'üêô',label:'GitHub',url:'https://github.com'},
  {icon:'üìß',label:'Gmail',url:'https://mail.google.com'},
  {icon:'üì∞',label:'Reddit',url:'https://reddit.com'},
  {icon:'ü§ñ',label:'Claude',url:'https://claude.ai'},
  {icon:'üéµ',label:'Spotify',url:'https://spotify.com'},
  {icon:'üí¨',label:'Discord',url:'https://discord.com'},
];

const DEF_SITES = [
  {icon:'üìß',label:'Gmail',url:'https://mail.google.com'},
  {icon:'üì∞',label:'Reddit',url:'https://reddit.com'},
  {icon:'üêô',label:'GitHub',url:'https://github.com'},
  {icon:'üî•',label:'HN',url:'https://news.ycombinator.com'},
  {icon:'‚ñ∂',label:'YouTube',url:'https://youtube.com'},
  {icon:'üí¨',label:'Discord',url:'https://discord.com'},
  {icon:'üéµ',label:'Spotify',url:'https://spotify.com'},
  {icon:'üåê',label:'Wikipedia',url:'https://wikipedia.org'},
];

const DEF_BOOKMARKS = [
  {icon:'üî•',label:'Hacker News',url:'https://news.ycombinator.com'},
  {icon:'üåê',label:'Wikipedia',url:'https://wikipedia.org'},
];

const DEF_HABITS = [
  {id:1,icon:'üíß',name:'Drink water',streak:0},
  {id:2,icon:'üìö',name:'Read 30 min',streak:0},
  {id:3,icon:'üèÉ',name:'Exercise',streak:0},
];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function todayStr(){return new Date().toISOString().slice(0,10);}

let links     = JSON.parse(ls('hp3_links')  ||'null') || DEF_LINKS;
let topSites  = JSON.parse(ls('hp3_top')    ||'null') || DEF_SITES;
let bookmarks = JSON.parse(ls('hp3_bmarks') ||'null') || DEF_BOOKMARKS;
let habits    = JSON.parse(ls('hp3_habits') ||'null') || DEF_HABITS;
let habitDone = JSON.parse(ls('hp3_hdone_'+todayStr())||'{}');
let notePages = JSON.parse(ls('hp3_notes')  ||'null') || ['','',''];
let activeNote = 0;
let bgData = ls('hp3_bg') || '';

let cfg = {
  bgOp:100, elAlpha:13, blurOn:true, blurStr:18,
  particles:20, qInt:15,
  wxCity:'', accent:'#f0a8c0',
  pomoF:25, pomoS:5, pomoL:15,
  aurora:12, greetName:'Prasann',
  countdown:null,
  theme:'dark',
  textAnim:'shimmer',
  taSpeed:0.4,
  splash:{
    mainText:"‚ú¶ Prasann's Space",
    subText:"Welcome back",
    mainColor:"#f0a8c0",
    subColor:"#88d4f5",
    bgColor:"#040a12"
  }
};
try{Object.assign(cfg, JSON.parse(ls('hp3_cfg')||'{}'));}catch(e){}
if(!cfg.splash) cfg.splash = {mainText:"‚ú¶ Prasann's Space",subText:"Welcome back",mainColor:"#f0a8c0",subColor:"#88d4f5",bgColor:"#040a12"};

function ls(k){try{return localStorage.getItem(k);}catch(e){return null;}}
function ss(k,v){try{localStorage.setItem(k,v);}catch(e){}}
function saveCfg(){ss('hp3_cfg',JSON.stringify(cfg));}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SPLASH SCREEN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function initSplash(){
  const s=cfg.splash;
  const el=document.getElementById('splash');
  el.style.setProperty('--splash-bg', s.bgColor||'#040a12');
  document.getElementById('splashMain').style.color = s.mainColor||'#f0a8c0';
  document.getElementById('splashMain').textContent = s.mainText||"‚ú¶ Prasann's Space";
  document.getElementById('splashSub').textContent = s.subText||"Welcome back";
  document.getElementById('splashSub').style.color = s.subColor||'rgba(255,255,255,0.45)';
  document.getElementById('splashBar').style.background = s.mainColor||'#f0a8c0';

  // Update settings fields
  const mt=document.getElementById('splashMainText');
  const st=document.getElementById('splashSubText');
  if(mt) mt.value = s.mainText||"‚ú¶ Prasann's Space";
  if(st) st.value = s.subText||"Welcome back";
  try{
    document.getElementById('splashMainColor').value = s.mainColor||'#f0a8c0';
    document.getElementById('splashSubColor').value = s.subColor||'#88d4f5';
    document.getElementById('splashBgColor').value = s.bgColor||'#040a12';
  }catch(e){}

  setTimeout(()=>{
    el.classList.add('hiding');
    setTimeout(()=>el.classList.add('hidden'),900);
  },2000);
}

function saveSplashSettings(){
  cfg.splash = {
    mainText: document.getElementById('splashMainText').value||"‚ú¶ Prasann's Space",
    subText: document.getElementById('splashSubText').value||"Welcome back",
    mainColor: document.getElementById('splashMainColor').value||'#f0a8c0',
    subColor: document.getElementById('splashSubColor').value||'#88d4f5',
    bgColor: document.getElementById('splashBgColor').value||'#040a12',
  };
  saveCfg();
  showToast('Splash settings saved!');
}

function previewSplash(){
  const el=document.getElementById('splash');
  const s=cfg.splash;
  el.style.setProperty('--splash-bg', document.getElementById('splashBgColor').value||'#040a12');
  document.getElementById('splashMain').style.color = document.getElementById('splashMainColor').value;
  document.getElementById('splashMain').textContent = document.getElementById('splashMainText').value||"‚ú¶ Prasann's Space";
  document.getElementById('splashSub').textContent = document.getElementById('splashSubText').value||"Welcome back";
  document.getElementById('splashSub').style.color = document.getElementById('splashSubColor').value;
  document.getElementById('splashBar').style.background = document.getElementById('splashMainColor').value;
  el.classList.remove('hidden','hiding');
  setTimeout(()=>{
    el.classList.add('hiding');
    setTimeout(()=>el.classList.add('hidden'),900);
  },2000);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   THEME
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function setTheme(t){
  cfg.theme=t;
  if(t==='light'){
    document.body.classList.add('light');
    document.getElementById('themeDark').classList.remove('active');
    document.getElementById('themeLight').classList.add('active');
  } else {
    document.body.classList.remove('light');
    document.getElementById('themeDark').classList.add('active');
    document.getElementById('themeLight').classList.remove('active');
  }
  saveCfg();
  showToast(t==='light'?'Light mode on!':'Dark mode on!');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TEXT ANIMATIONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function setTextAnim(el,type){
  cfg.textAnim=type;
  document.querySelectorAll('.ta-btn').forEach(b=>b.classList.remove('active'));
  el.classList.add('active');
  applyTextAnim();
  saveCfg();
}

function applyTextAnim(){
  const body=document.body;
  // Remove all ta- classes
  ['shimmer','glow','float','wave','neon','rainbow','breathe','none'].forEach(t=>{
    body.classList.remove('ta-'+t);
  });
  body.classList.add('ta-'+cfg.textAnim);

  // Apply wave char splitting if wave
  const greetEl=document.getElementById('greeting');
  if(cfg.textAnim==='wave'){
    const em=greetEl.querySelector('em');
    if(em){
      const text=em.textContent;
      em.innerHTML=text.split('').map((c,i)=>
        c===' '?'&nbsp;':`<span class="wave-char" style="animation-delay:${i*0.07}s">${c}</span>`
      ).join('');
    }
  } else {
    // Make sure animated-text class is on the em
    const em=greetEl.querySelector('em');
    if(em && !em.querySelector('.wave-char')){
      em.classList.add('animated-text');
    } else if(em && em.querySelector('.wave-char')){
      const txt=em.querySelectorAll('.wave-char');
      let str='';txt.forEach(s=>str+=s.textContent);
      em.innerHTML=str;
      em.classList.add('animated-text');
    }
  }

  // Apply to quote
  const quote=document.getElementById('quoteStrip');
  quote.classList.remove('animated-text');
  if(cfg.textAnim!=='wave') quote.classList.add('animated-text');

  // Focus clock
  const fc=document.getElementById('focusClock');
  if(fc) fc.classList.toggle('animated-text', cfg.textAnim!=='wave');
}

function onTaSpeed(el){
  const v=+el.value;
  const speed = (v/10).toFixed(1);
  cfg.taSpeed=+speed;
  el.style.setProperty('--pct',(v/10)*100+'%');
  document.getElementById('taSpeedVal').textContent=speed+'s';
  // update CSS var
  document.documentElement.style.setProperty('--ta-speed',speed+'s');
  // Rewrite shimmer/rainbow animations with new speed
  updateAnimSpeeds(speed);
  saveCfg();
}

function updateAnimSpeeds(speed){
  // dynamically inject style
  let st=document.getElementById('dynamic-anim-speeds');
  if(!st){st=document.createElement('style');st.id='dynamic-anim-speeds';document.head.appendChild(st);}
  const s=parseFloat(speed);
  st.textContent=`
    .ta-shimmer .animated-text{animation-duration:${s*7.5}s;}
    .ta-glow .animated-text{animation-duration:${s*6.25}s;}
    .ta-float .animated-text{animation-duration:${s*7.5}s;}
    .ta-neon .animated-text{animation-duration:${s*7.5}s;}
    .ta-rainbow .animated-text{animation-duration:${s*10}s;}
    .ta-breathe .animated-text{animation-duration:${s*10}s;}
    .ta-wave .wave-char{animation-duration:${s*3.75}s;}
  `;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TOAST
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let toastT;
function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  clearTimeout(toastT);toastT=setTimeout(()=>t.classList.remove('show'),2000);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   APPLY CONFIG
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function applyAll(){
  const r=document.documentElement.style;
  r.setProperty('--bg-opacity',cfg.bgOp/100);
  r.setProperty('--el-alpha',cfg.elAlpha/100);
  r.setProperty('--blur-str',cfg.blurOn?cfg.blurStr+'px':'0px');
  r.setProperty('--accent',cfg.accent);

  setSlider('bgOpSlider','bgOpVal',cfg.bgOp,'%',0,100);
  setSlider('elAlphaSlider','elAlphaVal',cfg.elAlpha,'%',3,40);
  setSlider('blurSlider','blurVal',cfg.blurStr,'px',0,40);
  setSlider('qIntSlider','qIntVal',cfg.qInt,'s',5,60);
  setSlider('ptSlider','ptVal',cfg.particles,'',0,80);
  setSlider('pomoFSlider','pomoFVal',cfg.pomoF,'m',5,60);
  setSlider('pomoSSlider','pomoSVal',cfg.pomoS,'m',1,15);
  setSlider('pomoLSlider','pomoLVal',cfg.pomoL,'m',5,30);
  setSlider('auroraSlider','auroraVal',cfg.aurora,'%',0,30);

  const taSpeed=cfg.taSpeed||0.4;
  const taSlider=document.getElementById('taSpeedSlider');
  if(taSlider){const v=taSpeed*10;taSlider.value=v;taSlider.style.setProperty('--pct',(v/10)*100+'%');document.getElementById('taSpeedVal').textContent=taSpeed+'s';}
  r.setProperty('--ta-speed',taSpeed+'s');
  updateAnimSpeeds(taSpeed);

  const bt=document.getElementById('blurToggle'),bw=document.getElementById('blurWrap');
  cfg.blurOn?bt.classList.add('active'):bt.classList.remove('active');
  bw.style.display=cfg.blurOn?'block':'none';

  initParticles(cfg.particles);
  applyAurora(cfg.aurora);
  applyBackground(bgData);

  const gi=document.getElementById('greetName');
  if(gi) gi.value=cfg.greetName||'Prasann';
  if(cfg.wxCity) document.getElementById('wxCityInput').value=cfg.wxCity;

  document.querySelectorAll('.swatch').forEach(s=>{
    s.classList.toggle('active',s.dataset.c===cfg.accent);
  });
  const ap=document.getElementById('accentPicker');
  if(ap) ap.value=cfg.accent||'#f0a8c0';

  // Apply theme
  if(cfg.theme) setTheme(cfg.theme);

  // Apply text anim
  if(cfg.textAnim){
    document.querySelectorAll('.ta-btn').forEach(b=>{
      b.classList.toggle('active',b.dataset.ta===cfg.textAnim);
    });
  }

  if(cfg.countdown) renderCountdown();
}

function setSlider(id,valId,val,unit,min,max){
  const el=document.getElementById(id),vl=document.getElementById(valId);
  if(!el) return;
  el.value=val;
  const pct=((val-min)/(max-min))*100;
  el.style.setProperty('--pct',pct+'%');
  if(vl) vl.textContent=val+unit;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SLIDER HANDLERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function onBgOp(el){cfg.bgOp=+el.value;el.style.setProperty('--pct',cfg.bgOp+'%');document.getElementById('bgOpVal').textContent=cfg.bgOp+'%';document.documentElement.style.setProperty('--bg-opacity',cfg.bgOp/100);saveCfg();}
function onElAlpha(el){cfg.elAlpha=+el.value;const pct=((cfg.elAlpha-3)/37)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('elAlphaVal').textContent=cfg.elAlpha+'%';document.documentElement.style.setProperty('--el-alpha',cfg.elAlpha/100);saveCfg();}
function toggleBlur(){cfg.blurOn=!cfg.blurOn;applyAll();saveCfg();}
function onBlur(el){cfg.blurStr=+el.value;const pct=(cfg.blurStr/40)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('blurVal').textContent=cfg.blurStr+'px';document.documentElement.style.setProperty('--blur-str',cfg.blurStr+'px');saveCfg();}
function onQInt(el){cfg.qInt=+el.value;const pct=((cfg.qInt-5)/55)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('qIntVal').textContent=cfg.qInt+'s';saveCfg();restartQuotes();}
function onParticles(el){cfg.particles=+el.value;el.style.setProperty('--pct',(cfg.particles/80)*100+'%');document.getElementById('ptVal').textContent=cfg.particles;initParticles(cfg.particles);saveCfg();}
function onAurora(el){cfg.aurora=+el.value;const pct=(cfg.aurora/30)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('auroraVal').textContent=cfg.aurora+'%';applyAurora(cfg.aurora);saveCfg();}
function onPomoF(el){cfg.pomoF=+el.value;const pct=((cfg.pomoF-5)/55)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('pomoFVal').textContent=cfg.pomoF+'m';saveCfg();if(pomoMode==='focus'&&!pomoRunning)resetPomo();}
function onPomoS(el){cfg.pomoS=+el.value;const pct=((cfg.pomoS-1)/14)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('pomoSVal').textContent=cfg.pomoS+'m';saveCfg();if(pomoMode==='short'&&!pomoRunning)resetPomo();}
function onPomoL(el){cfg.pomoL=+el.value;const pct=((cfg.pomoL-5)/25)*100;el.style.setProperty('--pct',pct+'%');document.getElementById('pomoLVal').textContent=cfg.pomoL+'m';saveCfg();if(pomoMode==='long'&&!pomoRunning)resetPomo();}
function resetAll(){if(!confirm('Reset everything?'))return;try{localStorage.clear();}catch(e){}location.reload();}
function saveGreetName(){const v=document.getElementById('greetName').value.trim();if(v){cfg.greetName=v;saveCfg();setGreeting();showToast('Name saved!');}}

function setAccent(el){
  cfg.accent=el.dataset.c;
  document.documentElement.style.setProperty('--accent',cfg.accent);
  document.querySelectorAll('.swatch').forEach(s=>s.classList.remove('active'));
  el.classList.add('active');saveCfg();
}
function setAccentCustom(el){
  cfg.accent=el.value;
  document.documentElement.style.setProperty('--accent',cfg.accent);
  document.querySelectorAll('.swatch').forEach(s=>s.classList.remove('active'));
  saveCfg();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SETTINGS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openSettings(){document.getElementById('sPanel').classList.add('open');document.getElementById('sOverlay').classList.add('open');}
function closeSettings(){document.getElementById('sPanel').classList.remove('open');document.getElementById('sOverlay').classList.remove('open');}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BACKGROUND
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function applyBackground(src){const el=document.getElementById('bg-img');if(!el)return;el.style.backgroundImage=src?`url('${src}')`:'none';}
if(bgData) applyBackground(bgData);

function handleBgUpload(input){
  const file=input.files[0];if(!file)return;
  if(file.size>5242880){alert('Max 5MB');input.value='';return;}
  document.getElementById('bgFileLbl').textContent='‚è≥ Loading‚Ä¶';
  const r=new FileReader();
  r.onload=e=>{bgData=e.target.result;document.getElementById('bgFileLbl').textContent='‚úì '+file.name;document.getElementById('bgUrl').value='';};
  r.readAsDataURL(file);
}
function applyBg(){
  const urlVal=document.getElementById('bgUrl').value.trim();
  const src=urlVal||bgData;
  if(!src){alert('Upload or enter URL');return;}
  try{ss('hp3_bg',src);}catch(e){console.warn('Storage full');}
  applyBackground(src);showToast('Background applied!');
}
function clearBg(){bgData='';try{localStorage.removeItem('hp3_bg');}catch(e){}applyBackground('');document.getElementById('bgFileLbl').textContent='Click to upload';document.getElementById('bgUrl').value='';showToast('Background cleared.');}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   AURORA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function applyAurora(v){
  document.querySelectorAll('.aurora-blob').forEach(b=>{b.style.opacity=v/100;});
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CLOCK
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function updateClock(){
  const n=new Date();
  let h=n.getHours(),m=n.getMinutes(),s=n.getSeconds();
  const ap=h>=12?'PM':'AM';h=h%12||12;
  document.getElementById('clock').innerHTML=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}<span class="clock-ampm">${ap}</span>`;
  document.getElementById('clockSec').textContent=String(s).padStart(2,'0')+'s';
  document.getElementById('clockSub').textContent=n.toLocaleDateString('en-GB',{weekday:'long',day:'numeric',month:'long'});
  const fc=document.getElementById('focusClock');
  if(fc) fc.textContent=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
}
updateClock();setInterval(updateClock,1000);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GREETING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function setGreeting(){
  const name=cfg.greetName||'Prasann';
  const msgs=GREETINGS_POOL.map(g=>g.replace('Prasann',name));
  const msg=msgs[Math.floor(Math.random()*msgs.length)];
  const el=document.getElementById('greeting');
  el.innerHTML=`<em class="animated-text">${msg}</em>`;
  document.getElementById('dateText').textContent=new Date().toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
  document.getElementById('focusDate').textContent=new Date().toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'});
  // Apply text animation after setting greeting
  setTimeout(applyTextAnim, 50);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   QUOTES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let quoteTimer;
function showQuote(){
  const el=document.getElementById('quoteStrip'),fq=document.getElementById('focusQuote');
  const q=MOTIVATIONS[Math.floor(Math.random()*MOTIVATIONS.length)];
  el.classList.remove('qfade');void el.offsetWidth;
  el.textContent=q;el.style.opacity='1';el.classList.add('qfade');
  if(fq) fq.textContent=q;
}
function restartQuotes(){clearInterval(quoteTimer);showQuote();quoteTimer=setInterval(showQuote,cfg.qInt*1000);}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SEARCH
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function doSearch(e){
  e.preventDefault();
  const q=document.getElementById('searchInput').value.trim();if(!q)return;
  const engine=document.getElementById('engineSelect').value;
  location.href=q.match(/^https?:\/\//)?q:engine+encodeURIComponent(q);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   QUICK LINKS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderLinks(){
  const c=document.getElementById('quickLinks');
  c.innerHTML=links.map((l,i)=>`
    <a class="ql-item" href="${l.url}" title="${l.label}">
      <span class="ql-icon">${l.icon}</span>
      <span class="ql-lbl-s">${l.label}</span>
      <button class="ql-del" onclick="rmLink(event,${i})">‚úï</button>
    </a>`).join('')+
    `<div class="ql-item ql-add" onclick="openModal('link')">
      <span class="ql-icon" style="opacity:.3">Ôºã</span>
      <span class="ql-lbl-s">Add</span>
    </div>`;
  c.querySelectorAll('.ql-item:not(.ql-add)').forEach(el=>{
    const d=el.querySelector('.ql-del');
    el.addEventListener('mouseenter',()=>d&&(d.style.display='flex'));
    el.addEventListener('mouseleave',()=>d&&(d.style.display='none'));
  });
}
function rmLink(e,i){e.preventDefault();e.stopPropagation();links.splice(i,1);ss('hp3_links',JSON.stringify(links));renderLinks();showToast('Removed.');}
function addLink(){
  const name=document.getElementById('newName').value.trim();
  const url=document.getElementById('newUrl').value.trim();
  const icon=document.getElementById('newIcon').value.trim()||'üîó';
  if(!name||!url)return;
  links.push({icon,label:name,url:url.startsWith('http')?url:'https://'+url});
  ss('hp3_links',JSON.stringify(links));renderLinks();closeModal('link');
  ['newName','newUrl','newIcon'].forEach(id=>document.getElementById(id).value='');
  showToast('Link added!');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TOP SITES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderTopSites(){
  document.getElementById('topSites').innerHTML=topSites.slice(0,8).map((s,i)=>`
    <a class="ts-item" href="${s.url}">
      <span class="ts-icon">${s.icon}</span>
      <span class="ts-lbl">${s.label}</span>
    </a>`).join('');
}
function addSite(){
  const name=document.getElementById('siteName').value.trim();
  const url=document.getElementById('siteUrl').value.trim();
  const icon=document.getElementById('siteIcon').value.trim()||'üåê';
  if(!name||!url)return;
  topSites.push({icon,label:name,url:url.startsWith('http')?url:'https://'+url});
  ss('hp3_top',JSON.stringify(topSites));renderTopSites();closeModal('site');
  ['siteName','siteUrl','siteIcon'].forEach(id=>document.getElementById(id).value='');
  showToast('Site added!');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BOOKMARKS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderBookmarks(){
  document.getElementById('bookmarks').innerHTML=
    bookmarks.map(b=>`<a class="bchip glass" href="${b.url}">${b.icon} ${b.label}</a>`).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NOTES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const NOTE_LABELS=['‚Ä¢ 1','‚Ä¢ 2','‚Ä¢ 3'];
const notesEl=document.getElementById('notes');
function renderNoteTabs(){
  document.getElementById('notesTabs').innerHTML=NOTE_LABELS.map((l,i)=>
    `<div class="note-tab${i===activeNote?' active':''}" onclick="switchNote(${i})">${l}</div>`).join('');
}
function switchNote(i){notePages[activeNote]=notesEl.value;activeNote=i;notesEl.value=notePages[i];renderNoteTabs();updateNotesCount();}
notesEl.value=notePages[activeNote];renderNoteTabs();

let saveTimer;
function updateNotesCount(){document.getElementById('notesCount').textContent=notesEl.value.length+' chars';}
notesEl.addEventListener('input',()=>{
  notePages[activeNote]=notesEl.value;updateNotesCount();
  clearTimeout(saveTimer);document.getElementById('notesSave').textContent='saving‚Ä¶';
  saveTimer=setTimeout(()=>{ss('hp3_notes',JSON.stringify(notePages));document.getElementById('notesSave').textContent='saved ‚úì';},600);
});
updateNotesCount();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   HABITS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderHabits(){
  document.getElementById('habitDate').textContent=todayStr();
  const c=document.getElementById('habitList');
  const done=Object.keys(habitDone).length;
  document.getElementById('habitStat').textContent=`${done}/${habits.length} habits`;
  if(!habits.length){c.innerHTML='<div style="font-size:0.7rem;color:var(--muted);padding:4px 0;">No habits yet!</div>';return;}
  c.innerHTML=habits.map((h,i)=>{
    const isDone=!!habitDone[h.id];
    return `<div class="habit-item">
      <div class="habit-chk${isDone?' done':''}" onclick="toggleHabit(${i})">${isDone?'‚úì':''}</div>
      <span class="habit-name${isDone?' done':''}">${h.icon} ${h.name}</span>
      <span class="habit-streak">üî•${h.streak}</span>
      <button class="habit-del" onclick="rmHabit(${i})">‚úï</button>
    </div>`;
  }).join('');
}
function toggleHabit(i){
  const h=habits[i];
  if(habitDone[h.id]){delete habitDone[h.id];if(h.streak>0)h.streak--;}
  else{habitDone[h.id]=true;h.streak=(h.streak||0)+1;}
  ss('hp3_hdone_'+todayStr(),JSON.stringify(habitDone));
  ss('hp3_habits',JSON.stringify(habits));renderHabits();
}
function rmHabit(i){habits.splice(i,1);ss('hp3_habits',JSON.stringify(habits));renderHabits();showToast('Habit removed.');}
function addHabit(){
  const v=document.getElementById('habitInput').value.trim();if(!v)return;
  habits.push({id:Date.now(),icon:'‚úÖ',name:v,streak:0});
  ss('hp3_habits',JSON.stringify(habits));renderHabits();
  document.getElementById('habitInput').value='';showToast('Habit added!');
}
function addHabitModal(){
  const name=document.getElementById('habitModalName').value.trim();if(!name)return;
  const icon=document.getElementById('habitModalIcon').value.trim()||'‚úÖ';
  habits.push({id:Date.now(),icon,name,streak:0});
  ss('hp3_habits',JSON.stringify(habits));renderHabits();closeModal('habit');
  ['habitModalName','habitModalIcon'].forEach(id=>document.getElementById(id).value='');
  showToast('Habit added!');
}
document.getElementById('habitInput').addEventListener('keydown',e=>{if(e.key==='Enter')addHabit();});
renderHabits();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   WEATHER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const WX_ICONS={0:'‚òÄÔ∏è',1:'üå§',2:'‚õÖ',3:'‚òÅÔ∏è',45:'üå´',48:'üå´',51:'üå¶',53:'üå¶',55:'üåß',61:'üåß',63:'üåß',65:'üåß',71:'‚ùÑÔ∏è',73:'‚ùÑÔ∏è',75:'‚ùÑÔ∏è',80:'üå¶',81:'üå¶',82:'üåß',95:'‚õà',96:'‚õà',99:'‚õà'};
const WX_DESC={0:'Clear sky',1:'Mainly clear',2:'Partly cloudy',3:'Overcast',45:'Foggy',51:'Light drizzle',53:'Drizzle',55:'Heavy drizzle',61:'Light rain',63:'Rain',65:'Heavy rain',71:'Light snow',73:'Snow',75:'Heavy snow',80:'Showers',82:'Heavy showers',95:'Thunderstorm',96:'Thunderstorm',99:'Thunderstorm'};
async function fetchWeather(){
  const city=document.getElementById('wxCityInput').value.trim();if(!city)return;
  cfg.wxCity=city;saveCfg();
  document.getElementById('wxCity').textContent='Loading‚Ä¶';
  try{
    const geo=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`).then(r=>r.json());
    if(!geo.results?.length){document.getElementById('wxCity').textContent='City not found';return;}
    const{latitude,longitude,name}=geo.results[0];
    const wx=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&hourly=apparent_temperature&timezone=auto&forecast_days=1`).then(r=>r.json());
    const{temperature,weathercode,windspeed}=wx.current_weather;
    const hr=new Date().getHours();
    const feels=wx.hourly?.apparent_temperature?.[hr];
    document.getElementById('wxIcon').textContent=WX_ICONS[weathercode]||'üå°';
    document.getElementById('wxTemp').textContent=Math.round(temperature)+'¬∞C';
    document.getElementById('wxCity').textContent=name;
    document.getElementById('wxDesc').textContent=WX_DESC[weathercode]||'';
    document.getElementById('wxFeels').textContent=feels!=null?`Feels ${Math.round(feels)}¬∞C ¬∑ Wind ${windspeed}km/h`:`Wind ${windspeed}km/h`;
    document.getElementById('wxCard').onclick=null;
    showToast('Weather updated!');
  }catch(e){document.getElementById('wxCity').textContent='Error fetching';showToast('Weather error.');}
}
if(cfg.wxCity){document.getElementById('wxCityInput').value=cfg.wxCity;fetchWeather();}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   POMODORO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let pomoMode='focus',pomoRunning=false,pomoTimer=null;
let pomoSecsLeft=cfg.pomoF*60,pomoTotalSecs=cfg.pomoF*60;
let pomoSessions=parseInt(ls('hp3_pomo_sess')||'0');
const CIRC=2*Math.PI*32;

function pomoDur(m){return m==='focus'?cfg.pomoF:m==='short'?cfg.pomoS:cfg.pomoL;}
function setPomoMode(m){
  if(pomoRunning)return;
  pomoMode=m;
  ['Focus','Short','Long'].forEach(t=>document.getElementById('pomoTab'+t).classList.remove('active'));
  document.getElementById('pomoTab'+m.charAt(0).toUpperCase()+m.slice(1)).classList.add('active');
  pomoSecsLeft=pomoDur(m)*60;pomoTotalSecs=pomoSecsLeft;
  renderPomo();document.getElementById('pomoStatus').textContent='Paused';
}
function renderPomo(){
  const mi=Math.floor(pomoSecsLeft/60),se=pomoSecsLeft%60;
  document.getElementById('pomoTime').textContent=`${String(mi).padStart(2,'0')}:${String(se).padStart(2,'0')}`;
  const pct=pomoSecsLeft/pomoTotalSecs;
  document.getElementById('pomoArc').style.strokeDashoffset=CIRC*(1-pct);
  document.getElementById('pomoArc').style.stroke=pomoMode==='focus'?'var(--accent)':pomoMode==='short'?'var(--accent2)':'var(--accent3)';
  document.getElementById('pomoSessions').textContent=`Sessions: ${pomoSessions}`;
  document.getElementById('pomoStat').textContent=`${pomoSessions} sessions`;
}
function togglePomo(){
  if(pomoRunning){
    clearInterval(pomoTimer);pomoRunning=false;
    document.getElementById('pomoStartBtn').textContent='‚ñ∂ Start';
    document.getElementById('pomoStatus').textContent='Paused';
  }else{
    pomoRunning=true;
    document.getElementById('pomoStartBtn').textContent='‚è∏ Pause';
    document.getElementById('pomoStatus').textContent=pomoMode==='focus'?'Focusing‚Ä¶':'On break';
    pomoTimer=setInterval(()=>{
      pomoSecsLeft--;renderPomo();
      if(pomoSecsLeft<=0){
        clearInterval(pomoTimer);pomoRunning=false;
        document.getElementById('pomoStartBtn').textContent='‚ñ∂ Start';
        if(pomoMode==='focus'){pomoSessions++;ss('hp3_pomo_sess',pomoSessions);}
        showToast(pomoMode==='focus'?'Session done! üéâ':'Break over! Back to work.');
        try{const ctx=new(window.AudioContext||window.webkitAudioContext)();const o=ctx.createOscillator();const g=ctx.createGain();o.connect(g);g.connect(ctx.destination);o.type='sine';o.frequency.setValueAtTime(880,ctx.currentTime);g.gain.setValueAtTime(0.28,ctx.currentTime);g.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+1.2);o.start();o.stop(ctx.currentTime+1.2);}catch(e){}
        const next=pomoMode==='focus'?(pomoSessions%4===0?'long':'short'):'focus';
        setPomoMode(next);
      }
    },1000);
  }
}
function resetPomo(){clearInterval(pomoTimer);pomoRunning=false;document.getElementById('pomoStartBtn').textContent='‚ñ∂ Start';document.getElementById('pomoStatus').textContent='Paused';setPomoMode(pomoMode);}
function skipPomo(){clearInterval(pomoTimer);pomoRunning=false;document.getElementById('pomoStartBtn').textContent='‚ñ∂ Start';const n=pomoMode==='focus'?'short':'focus';setPomoMode(n);}
renderPomo();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   COUNTDOWN (with tick animation)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let cdownInterval;
let prevCdownVals = {d:null,h:null,m:null,s:null};

function renderCountdown(){
  if(!cfg.countdown)return;
  const{label,ts}=cfg.countdown;
  document.getElementById('cdownLabel').textContent='Until '+label;
  function tick(){
    const diff=ts-Date.now();
    if(diff<=0){clearInterval(cdownInterval);['cdownD','cdownH','cdownM','cdownS'].forEach(id=>document.getElementById(id).textContent='0');return;}
    const d=Math.floor(diff/86400000);
    const h=Math.floor((diff%86400000)/3600000);
    const m=Math.floor((diff%3600000)/60000);
    const s=Math.floor((diff%60000)/1000);
    const vals={d,h:String(h).padStart(2,'0'),m:String(m).padStart(2,'0'),s:String(s).padStart(2,'0')};
    ['d','h','m','s'].forEach(k=>{
      const el=document.getElementById('cdown'+k.toUpperCase());
      if(el.textContent!==String(vals[k])){
        el.textContent=vals[k];
        el.classList.remove('tick');
        void el.offsetWidth;
        el.classList.add('tick');
      }
    });
  }
  clearInterval(cdownInterval);tick();cdownInterval=setInterval(tick,1000);
}
function setCountdown(){
  const name=document.getElementById('cdownName').value.trim();
  const dateStr=document.getElementById('cdownDate').value.trim();
  if(!name||!dateStr)return;
  const ts=new Date(dateStr).getTime();
  if(isNaN(ts)){showToast('Invalid date');return;}
  cfg.countdown={label:name,ts};saveCfg();renderCountdown();closeModal('countdown');
  showToast('Countdown set!');
}
if(cfg.countdown) renderCountdown();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FOCUS MODE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let focusOpen=false;
function toggleFocus(){
  focusOpen=!focusOpen;
  document.getElementById('focusMode').classList.toggle('open',focusOpen);
  if(focusOpen) showQuote();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MODALS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function openModal(t){document.getElementById(t+'Modal').classList.add('open');}
function closeModal(t){document.getElementById(t+'Modal').classList.remove('open');}
document.querySelectorAll('.modal-overlay').forEach(m=>m.addEventListener('click',e=>{if(e.target===m)m.classList.remove('open');}));

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   KEYBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.addEventListener('keydown',e=>{
  if(e.key==='Escape'){document.querySelectorAll('.modal-overlay').forEach(m=>m.classList.remove('open'));closeSettings();if(focusOpen)toggleFocus();}
  if((e.metaKey||e.ctrlKey)&&e.key==='k'){e.preventDefault();document.getElementById('searchInput').focus();}
  if((e.metaKey||e.ctrlKey)&&e.key===','){e.preventDefault();openSettings();}
  if((e.metaKey||e.ctrlKey)&&e.shiftKey&&e.key==='F'){e.preventDefault();toggleFocus();}
});
setTimeout(()=>document.getElementById('searchInput').focus(),2200);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PARTICLES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function initParticles(count){
  const c=document.getElementById('particles');if(!c)return;c.innerHTML='';
  count=Math.max(0,Math.min(200,Math.floor(count)));
  for(let i=0;i<count;i++){
    const p=document.createElement('div');p.className='pt';
    const sz=Math.random()*3+1;
    p.style.cssText=`width:${sz}px;height:${sz}px;left:${Math.random()*100}%;animation-duration:${10+Math.random()*16}s;animation-delay:${Math.random()*22}s;`;
    c.appendChild(p);
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   INIT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
renderLinks();
renderTopSites();
renderBookmarks();
applyAll();
setGreeting();
restartQuotes();
initSplash();
</script>
</body>
</html>

